{"ast":null,"code":"var _jsxFileName = \"/Users/yiping.z/Desktop/meeting-search/frontend/src/components/Home.js\";\nimport React from \"react\";\nimport Header from \"./Header\";\nimport Meetings from \"./Meetings\";\nimport Contacts from \"./Contacts\";\nimport Tweets from \"./Tweets\";\nimport Dropboxs from \"./Dropboxs\";\nimport Slacks from \"./Slacks\";\n\nclass Home extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      search: \"\",\n      meetings: [],\n      contacts: [],\n      tweets: [],\n      dropboxs: [],\n      slacks: [],\n      allMeetings: [],\n      allContacts: [],\n      allTweets: [],\n      allDropboxs: [],\n      allSlacks: []\n    };\n\n    this.searchHelper = (array, text) => {\n      let input = text.split(\" \");\n      let freqMap = new Map();\n      array.forEach(a => {\n        let freq = 0;\n        input.forEach(e => {\n          const index = a.matching_terms.indexOf(e);\n\n          if (index >= 0 || text === \"\") {\n            freq++;\n          }\n        });\n\n        if (freq > 0) {\n          freqMap.set(a, freq);\n        }\n      });\n      freqMap = new Map([...freqMap.entries()].sort((a, b) => b[1] - a[1]));\n      return freqMap.keys();\n    };\n\n    this.search = text => {\n      text = text.toLowerCase();\n      this.setState({\n        search: text\n      });\n      let myMeetings = this.state.allMeetings.filter(p => {\n        const index = p.matching_terms.indexOf(text);\n        return index >= 0 || text === \"\";\n      });\n      myMeetings = this.rankMeeting(myMeetings);\n      let myContacts = [...this.state.allContacts];\n      myContacts = myContacts.filter(p => {\n        const index = p.matching_terms.indexOf(text);\n        return index >= 0 || text === \"\";\n      });\n      let myTweets = this.searchHelper(this.state.allTweets, text);\n      let myDropbox = [...this.state.allDropboxs];\n      myDropbox = myDropbox.filter(p => {\n        const index = p.matching_terms.indexOf(text);\n        return index >= 0 || text === \"\";\n      });\n      let mySlack = [...this.state.allSlacks];\n      mySlack = mySlack.filter(p => {\n        const index = p.matching_terms.indexOf(text);\n        return index >= 0 || text === \"\";\n      });\n      this.setState({\n        meetings: myMeetings,\n        contacts: myContacts,\n        tweets: myTweets,\n        dropboxs: myDropbox,\n        slacks: mySlack\n      });\n    };\n\n    this.rankMeeting = meetings => {\n      console.log(\"start ranking\");\n      let upcoming = [];\n      let past = [];\n      meetings.forEach(m => {\n        let time = new Date(m.date).getTime();\n        let cur = new Date().getTime();\n\n        if (time < cur) {\n          past.push({\n            timestamp: time - cur,\n            meeting: m\n          });\n        } else {\n          upcoming.push({\n            timestamp: time - cur,\n            meeting: m\n          });\n        }\n      });\n      upcoming.sort((a, b) => a.timestamp - b.timestamp);\n      past.sort((a, b) => b.timestamp - a.timestamp);\n      return [...upcoming, ...past].map(o => o.meeting);\n    };\n  }\n\n  componentDidMount() {\n    var arr = [fetch(\"http://localhost:3004/calendar\").then(response => response.json()).then(data => {\n      this.setState({\n        meetings: data,\n        allMeetings: data\n      });\n    }), fetch(\"http://localhost:3004/contacts\").then(response => response.json()).then(data => {\n      this.setState({\n        contacts: data,\n        allContacts: data\n      });\n    }), fetch(\"http://localhost:3004/tweet\").then(response => response.json()).then(data => {\n      this.setState({\n        tweets: data,\n        allTweets: data\n      });\n    }), fetch(\"http://localhost:3004/dropbox\").then(response => response.json()).then(data => {\n      this.setState({\n        dropboxs: data,\n        allDropboxs: data\n      });\n    }), fetch(\"http://localhost:3004/slack\").then(response => response.json()).then(data => {\n      this.setState({\n        slacks: data,\n        allSlacks: data\n      });\n    })];\n    Promise.all(arr).then(() => this.search(\"\"));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      search: this.search,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"columns\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column is-one-fifth fixed-menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"aside\", {\n      className: \"menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      class: \"menu-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#meetings\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 37\n      }\n    }, \"Meetings\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#contacts\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 37\n      }\n    }, \"Contacts\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#tweets\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 37\n      }\n    }, \"Tweets\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#dropboxs\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 37\n      }\n    }, \"Dropboxs\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#slacks\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 37\n      }\n    }, \"Slacks\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column search-result\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"anchor\",\n      name: \"meetings\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Meetings, {\n      meetings: this.state.meetings,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 63\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"anchor\",\n      name: \"contacts\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Contacts, {\n      contacts: this.state.contacts,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 63\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"anchor\",\n      name: \"tweets\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Tweets, {\n      tweets: this.state.tweets,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 61\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"anchor\",\n      name: \"dropboxs\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Dropboxs, {\n      dropboxs: this.state.dropboxs,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 63\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"anchor\",\n      name: \"slacks\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Slacks, {\n      slacks: this.state.slacks,\n      search: this.state.search,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 61\n      }\n    })))));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/Users/yiping.z/Desktop/meeting-search/frontend/src/components/Home.js"],"names":["React","Header","Meetings","Contacts","Tweets","Dropboxs","Slacks","Home","Component","state","search","meetings","contacts","tweets","dropboxs","slacks","allMeetings","allContacts","allTweets","allDropboxs","allSlacks","searchHelper","array","text","input","split","freqMap","Map","forEach","a","freq","e","index","matching_terms","indexOf","set","entries","sort","b","keys","toLowerCase","setState","myMeetings","filter","p","rankMeeting","myContacts","myTweets","myDropbox","mySlack","console","log","upcoming","past","m","time","Date","date","getTime","cur","push","timestamp","meeting","map","o","componentDidMount","arr","fetch","then","response","json","data","Promise","all","render"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Header from \"./Header\";\nimport Meetings from \"./Meetings\";\nimport Contacts from \"./Contacts\";\nimport Tweets from \"./Tweets\";\nimport Dropboxs from \"./Dropboxs\";\nimport Slacks from \"./Slacks\";\n\nclass Home extends React.Component {\n    state = {\n        search: \"\",\n        meetings: [],\n        contacts: [],\n        tweets: [],\n        dropboxs: [],\n        slacks: [],\n        allMeetings: [],\n        allContacts: [],\n        allTweets: [],\n        allDropboxs: [],\n        allSlacks: [],\n    };\n\n    componentDidMount() {\n        var arr = [\n            fetch(\"http://localhost:3004/calendar\")\n                .then((response) => response.json())\n                .then((data) => {\n                    this.setState({\n                        meetings: data,\n                        allMeetings: data,\n                    });\n                }),\n            fetch(\"http://localhost:3004/contacts\")\n                .then((response) => response.json())\n                .then((data) => {\n                    this.setState({\n                        contacts: data,\n                        allContacts: data,\n                    });\n                }),\n            fetch(\"http://localhost:3004/tweet\")\n                .then((response) => response.json())\n                .then((data) => {\n                    this.setState({\n                        tweets: data,\n                        allTweets: data,\n                    });\n                }),\n            fetch(\"http://localhost:3004/dropbox\")\n                .then((response) => response.json())\n                .then((data) => {\n                    this.setState({\n                        dropboxs: data,\n                        allDropboxs: data,\n                    });\n                }),\n            fetch(\"http://localhost:3004/slack\")\n                .then((response) => response.json())\n                .then((data) => {\n                    this.setState({\n                        slacks: data,\n                        allSlacks: data,\n                    });\n                })\n        ];\n        Promise.all(arr).then(() => this.search(\"\"));\n    }\n\n    searchHelper = (array, text) =>{\n        let input = text.split(\" \");\n        let freqMap = new Map(); \n        array.forEach(a => {\n            let freq = 0;\n            input.forEach(e => {\n                const index = a.matching_terms.indexOf(e);\n                if(index >= 0 || text === \"\"){\n                    freq++;\n                }\n            })\n            if(freq > 0){\n                freqMap.set(a, freq);\n            }\n        });\n        freqMap = new Map([...freqMap.entries()].sort((a, b) => b[1] - a[1]));\n        return freqMap.keys();\n    }\n\n    search = (text) => {\n        text = text.toLowerCase();\n        this.setState({\n            search: text,\n        });\n        let myMeetings = this.state.allMeetings.filter((p) => {\n            const index = p.matching_terms.indexOf(text);\n            return index >= 0 || text === \"\";\n        });\n        myMeetings = this.rankMeeting(myMeetings);\n        let myContacts = [...this.state.allContacts];\n        myContacts = myContacts.filter((p) => {\n            const index = p.matching_terms.indexOf(text);\n            return index >= 0 || text === \"\";\n        });\n        let myTweets = this.searchHelper(this.state.allTweets, text);\n        let myDropbox = [...this.state.allDropboxs];\n        myDropbox = myDropbox.filter((p) => {\n            const index = p.matching_terms.indexOf(text);\n            return index >= 0 || text === \"\";\n        });\n        let mySlack = [...this.state.allSlacks];\n        mySlack = mySlack.filter((p) => {\n            const index = p.matching_terms.indexOf(text);\n            return index >= 0 || text === \"\";\n        });\n        this.setState({\n            meetings: myMeetings,\n            contacts: myContacts,\n            tweets: myTweets,\n            dropboxs: myDropbox,\n            slacks: mySlack,\n        });\n    };\n\n    rankMeeting = (meetings) => {\n        console.log(\"start ranking\");\n        let upcoming = [];\n        let past = [];\n        meetings.forEach(m => {\n            let time = new Date(m.date).getTime();\n            let cur = new Date().getTime();\n            if(time < cur){\n                past.push({timestamp: time-cur, meeting: m});\n            }\n            else{\n                upcoming.push({timestamp: time-cur, meeting: m});\n            }\n        });\n        upcoming.sort((a, b) => a.timestamp - b.timestamp);\n        past.sort((a, b) => b.timestamp - a.timestamp);\n        return [...upcoming, ...past].map(o => o.meeting);\n    }\n\n    render() {\n        return (\n            <div>\n                <div>\n                    <Header search={this.search} />\n                </div>\n                <div className=\"columns\">\n                    <div className=\"column is-one-fifth fixed-menu\">\n                        <aside className=\"menu\">\n                            <ul class=\"menu-list\">\n                                <li><a href=\"#meetings\">Meetings</a></li>\n                                <li><a href=\"#contacts\">Contacts</a></li>\n                                <li><a href=\"#tweets\">Tweets</a></li>\n                                <li><a href=\"#dropboxs\">Dropboxs</a></li>\n                                <li><a href=\"#slacks\">Slacks</a></li>\n                            </ul>\n                        </aside>\n                    </div>\n                    <div className=\"column search-result\">\n                        <a className=\"anchor\" name=\"meetings\"><Meetings meetings={this.state.meetings} /></a>\n                        <a className=\"anchor\" name=\"contacts\"><Contacts contacts={this.state.contacts} /></a>\n                        <a className=\"anchor\" name=\"tweets\"><Tweets tweets={this.state.tweets} /></a>\n                        <a className=\"anchor\" name=\"dropboxs\"><Dropboxs dropboxs={this.state.dropboxs} /></a>\n                        <a className=\"anchor\" name=\"slacks\"><Slacks slacks={this.state.slacks} search={this.state.search} /></a>\n                    </div>\n                </div>\n            </div> \n        );\n    }\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}